Math.E=Math.exp(1);Math.LN2=Math.log(2);Math.LN10=Math.log(10);Math.LOG2E=1.0/Math.LN2;Math.LOG10E=1.0/Math.LN10;Math.PI=Math.acos(-1);Math.SQRT1_2=Math.sqrt(0.5);Math.SQRT2=Math.sqrt(2);String.prototype.anchor=function(href){return'<a name="'+href+'">'+this+'</a>'};String.prototype.bold=function(){return'<b>'+this+'</b>'};String.prototype.big=function(){return'<big>'+this+'</big>'};String.prototype.blink=function(){return'<blink>'+this+'</blink>'};String.prototype.fixed=function(){return'<tt>'+this+'</tt>'};String.prototype.fontcolor=function(color){return'<font color="'+color+'">'+this+'</font>'};String.prototype.fontsize=function(size){return'<font size="'+size+'">'+this+'</font>'};String.prototype.italics=function(){return'<i>'+this+'</i>'};String.prototype.small=function(){return'<small>'+this+'</small>'};String.prototype.strike=function(){return'<strike>'+this+'</strike>'};String.prototype.sub=function(){return'<sub>'+this+'</sub>'};String.prototype.sup=function(){return'<sup>'+this+'</sup>'};String.prototype.toSource=function(){return'(new String('+this.quote()+'))'};String.prototype.toUpperCase=function(){var LC_CHARS='abcdefghijklmnopqrstuvwxyz';var UC_CHARS='ABCDEFGHIJKLMNOPQRSTUVWXYZ';var ALPHABET_SIZE=LC_CHARS.length;var rval='';var len=this.length;for(var i=0;i<len;i++){var currentChar=this.charAt(i);for(var n=0;n<ALPHABET_SIZE;n++){if(currentChar===LC_CHARS[n]){currentChar=UC_CHARS[n];break}}rval+=currentChar}return rval};String.prototype.trimRight=function(){return(this.replace(/\s+$/g,''))};String.prototype.slice=function(startIndex,endIndex){var startIndex=(typeof startIndex==='undefined')?0:startIndex;var endIndex=(typeof endIndex==='undefined')?this.length:endIndex;var rval='';for(var i=startIndex;i<endIndex;i++){rval+=this.charAt(i)}return rval};String.prototype.localeCompare=function(other){if(this<other){return-1}else if(this>other){return 1}else{return 0}};String.prototype.toString=function(){return this+''};String.prototype.split=function(separator,limit){if(separator===undefined||separator===null){return[this+""]}if(limit===undefined||limit<0){limit=Infinity}else if(isNaN(limit)){return[]}else{limit=Math.floor(limit)}separator=separator.toString();var str=this.toString()||"";var len=str.length;var rval=[""];var rvalEnd=0;var i=0;var seplen=separator.length;var isRegExp=separator.constructor.toString().indexOf("RegExp")!==-1;if(separator===''){for(;i<len;i++){rval[i]=str.charAt(i)}}else{while(i<len){var isMatch=true;var n=0;if(isRegExp){var currentSlice='';if(!separator.test(str.charAt(i))){isMatch=false}else{for(n=0;n<len-i;n++){currentSlice+=str.charAt(n+i);var matches=separator.exec(currentSlice);if(matches===null){break}else if(matches[0]!==currentSlice){break}}}}else{for(n=0;n<seplen;n++){if(str.charAt(i+n)!==separator.charAt(n)){isMatch=false;break}}}if(isMatch){rvalEnd++;rval[rvalEnd]=''}else{rval[rvalEnd]+=str.charAt(i)}i+=(isMatch?n:1)}}if(typeof limit==='number'){if(rval.length>limit){rval.length=limit}}return rval};String.prototype.quote=function(){return'"'+this.replace(/\\/g,"\\\\").replace(/"/g,"\\\"").replace(/\n/,"\\n")+'"'};String.prototype.substr=function(fromIndex,amount){var fromIndex=(typeof fromIndex==='undefined')?0:fromIndex;var amount=(typeof amount==='undefined')?this.length:amount;var rval='';var endpoint=fromIndex+amount;for(var i=fromIndex;i<endpoint;i++){rval+=this.charAt(i)}return rval};String.prototype.toLocaleLowerCase=function(){return this.toLowerCase()};String.prototype.concat=function(){var rval=this+'';for(var i=0,l=arguments.length;i<l;i++){rval+=arguments[i]}return rval};String.prototype.replace=function(seperator,replacement){var isRegExp=seperator.constructor.toSource().indexOf("RegExp")!==-1;if(isRegExp){return this.split(seperator).join(replacement)}else{return''}};String.prototype.toLocaleUpperCase=function(){return this.toUpperCase()};String.prototype.search=function(regexp){var spaces=this.split(regexp);if(spaces.length===1){return-1}return(spaces[0].length)};String.prototype.substring=function(index1,index2){var index1=(typeof index1==='undefined')?0:index1;var index2=(typeof index2==='undefined')?this.length:index2;var startIndex=(index1>index2)?index2:index1;var endIndex=(index1>index2)?index1:index2;var rval='';for(;startIndex<endIndex;startIndex++){rval+=this.charAt(startIndex)}return rval};String.prototype.toLowerCase=function(){var LC_CHARS='abcdefghijklmnopqrstuvwxyz';var UC_CHARS='ABCDEFGHIJKLMNOPQRSTUVWXYZ';var ALPHABET_SIZE=LC_CHARS.length;var rval='';var len=this.length;for(var i=0;i<len;i++){var currentChar=this.charAt(i);for(var n=0;n<ALPHABET_SIZE;n++){if(currentChar===UC_CHARS[n]){currentChar=LC_CHARS[n];break}}rval+=currentChar}return rval};String.prototype.indexOf=function(searchString,searchStart){var searchStart=(typeof searchStart==='undefined')?0:searchStart;var searchLength=searchString.length;var endPoint=this.length-searchLength+1;for(var startPoint=searchStart;startPoint<endPoint;startPoint++){var isMatch=true;for(var i=0;i<searchLength;i++){if(this.charAt(startPoint+i)!==searchString.charAt(i)){isMatch=false;break}}if(isMatch){return startPoint}}return-1};String.prototype.trimLeft=function(){return(this.replace(/^\s+/,''))};String.prototype.trim=function(){return(this.replace(/^\s+|\s+$/g,''))};String.prototype.lastIndexOf=function(searchString,searchStart){var str=(typeof searchStart!=='undefined')?this.substr(0,searchStart+1):this.toString();str=str.split('').reverse().join('');var index=str.indexOf(searchString);return((index===-1)?-1:(str.length-1-index))};String.prototype.charCodeAt=function(index){var mychar=this.toString().charAt(index);for(var i=0;i<256;i++){if(String.fromCharCode(i)===mychar){return i}}return null};Array.prototype.forEach=function(fun){var len=this.length;if(typeof fun!="function"){throw new TypeError();}var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this){fun.call(thisp,this[i],i,this)}}};Array.prototype.toSource=function(){return('['+this.join(", ")+']')};Array.prototype.every=function(fun){var len=this.length;if(typeof fun!="function"){throw new TypeError();}var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this&&!fun.call(thisp,this[i],i,this)){return false}}return true};Array.prototype.pop=function(){if(this.length==0){return undefined}var end=this.length-1;var temp=this[end];delete this[end];this.length=this.length-1;return temp};Array.prototype.unshift=function(){var arglen=arguments.length;var mylen=this.length;for(var i=mylen-1;i>=0;i--){this[i+arglen]=this[i]}for(var i=0;i<arglen;i++){this[i]=arguments[i]}return this.length};Array.prototype.slice=function(begin,end){var len=this.length;if(typeof(begin)=='undefined'||begin==null){begin=0}else if(0>begin){begin+=len}if(typeof(end)=='undefined'){end=len}else if(0>end){end+=len}if(end>this.length){end=this.length}var rval=[];var currentIndex=0;for(var i=begin;i<end;i++){rval[currentIndex]=this[i];currentIndex++}return rval};Array.prototype.splice=function(index,howMany){if(arguments.length==0){return arguments.callee}var len=this.length;var insertionCount=arguments.length-2;if(typeof howMany=='undefined'){howMany=len;insertionCount++}if(0>howMany){howMany=0}if(0>index){index+=len}var rval=this.slice(index,index+howMany);for(var i=index;i<len-howMany;i++){this[i]=this[i+howMany]}this.length-=howMany;this.length+=insertionCount;for(var i=this.length-1;i>index;i--){this[i]=this[i-insertionCount]}var argn=0;for(var i=0;i<insertionCount;i++){this[index+i]=arguments[2+argn++]}return rval};Array.prototype.reverse=function(){var start=0;var end=this.length-1;while(start<end){var endingValue=this[end];this[end]=this[start];this[start]=endingValue;start++;end--}return this};Array.prototype.toString=function(){return this.join(",")};Array.prototype.reduceRight=function(fun){var len=this.length;if(typeof fun!="function"){throw new TypeError();}if(len==0&&arguments.length==1){throw new TypeError();}var i=len-1;if(arguments.length>=2){var rv=arguments[1]}else{do{if(i in this){rv=this[i--];break}if(--i<0){throw new TypeError();}}while(true)}for(;i>=0;i--){if(i in this){rv=fun.call(null,rv,this[i],i,this)}}return rv};Array.prototype.shift=function(){var mylen=this.length;if(mylen==0){return undefined}var temp=this[0];for(var i=1;i<mylen;i++){this[i-1]=this[i]}delete[mylen-1];this.length=this.length-1;return temp};Array.prototype.push=function(){var mylen=this.length;var arglen=arguments.length;for(var i=0;i<arglen;i++){this[mylen+i]=arguments[i]}return this.length};Array.prototype.sort=function(compareFunction){if(typeof compareFunction=='undefined'){compareFunction=function(a,b){if(a.toString()>b.toString()){return 1}else{return-1}}}var elems=this.length-1;while(1){var swappedYet=false;for(var i=0;i<elems;i++){var result=compareFunction(this[i],this[i+1]);if(result>0){var temp=this[i+1];this[i+1]=this[i];this[i]=temp;swappedYet=true}}if(!swappedYet){break}}};Array.prototype.reduce=function(fun){var len=this.length;if(typeof fun!="function"){throw new TypeError();}if(len==0&&arguments.length==1){throw new TypeError();}var i=0;if(arguments.length>=2){var rv=arguments[1]}else{do{if(i in this){rv=this[i++];break}if(++i>=len){throw new TypeError();}}while(true)}for(;i<len;i++){if(i in this){rv=fun.call(null,rv,this[i],i,this)}}return rv};Array.prototype.filter=function(fun){var len=this.length;if(typeof fun!="function"){throw new TypeError();}var res=new Array();var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this){var val=this[i];if(fun.call(thisp,val,i,this)){res.push(val)}}}return res};Array.prototype.join=function(separator){var len=this.length;var rval='';if(separator===undefined){separator=','}for(var i=0;i<len;i++){var elem=this[i];rval+=(elem===null||elem===undefined)?'':elem;if(i!=len-1){rval+=separator}}return rval};Array.prototype.some=function(fun){var len=this.length;if(typeof fun!="function"){throw new TypeError();}var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this&&fun.call(thisp,this[i],i,this)){return true}}return false};Array.prototype.concat=function(){var arglen=arguments.length;var mylen=this.length;var rval=new Array();for(var i=0;i<mylen;i++){rval[i]=this[i]}var arrayOffset=mylen;for(var i=0;i<arglen;i++){var currentArg=arguments[i];if(currentArg.constructor.toString().indexOf("Array")==-1){rval[arrayOffset+i]=currentArg}else{var subArrayLen=currentArg.length;for(var si=0;si<subArrayLen;si++){rval[arrayOffset+i]=currentArg[si];arrayOffset++}arrayOffset--}}return rval};Array.prototype.indexOf=function(elt){var len=this.length;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len}for(;from<len;from++){if(from in this&&this[from]===elt){return from}}return-1};Array.prototype.lastIndexOf=function(elt){var len=this.length;var from=Number(arguments[1]);if(isNaN(from)){from=len-1}else{from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len}else if(from>=len){from=len-1}}for(;from>-1;from--){if(from in this&&this[from]===elt){return from}}return-1};Array.prototype.map=function(fun){var len=this.length;if(typeof fun!="function"){throw new TypeError();}var res=new Array(len);var thisp=arguments[1];for(var i=0;i<len;i++){if(i in this){res[i]=fun.call(thisp,this[i],i,this)}}return res};Date.prototype.toSource=function(){return"(new Date("+this.getTime()+"))"};Math.toSource=function(){return"Math"};Math.max=function(){var args=arguments;var arglen=args.length;var i=0;var currentArg=0;var rval=-Infinity;while(i<arglen){currentArg=args[i++];if(currentArg!=currentArg){return NaN}if(rval<currentArg){rval=currentArg}}return rval};Math.floor=function(num){if(num===Infinity||num===-Infinity||num===0||num!=num){return num}var rval=~~num;if(num<0&&rval!==num){rval-=1}return~~rval};Math.ceil=function(num){return-1*Math.floor(-num)};Math.round=function(num){var flooredNum=Math.floor(num);if(num-flooredNum<0.5){return flooredNum}else{return flooredNum+1}};Math.min=function(){var args=arguments;var arglen=args.length;var i=0;var currentArg=0;var rval=+Infinity;while(i<arglen){currentArg=args[i++];if(currentArg!=currentArg){return NaN}if(rval>currentArg){rval=currentArg}}return rval};Math.abs=function(num){return Math.sqrt(num*num)};Boolean.prototype.toSource=function(){return'(new Boolean('+this.toString()+'))'};Boolean.prototype.toString=function(){return((this==true)?'true':'false')};Error.prototype.toSource=function(){return"new Error(\""+this.message+"\")"};Error.prototype.toString=function(){var separator=" : ";var message=this.message||"";if(message!==""){message=separator+message}return this.name+message};RegExp.prototype.toSource=function(){return this.toString()};Number.prototype.toSource=function(){return('(new Number("'+this.toString()+'"))')};Number.prototype.toPrecision=function(precision){if(typeof precision=='undefined'){return this.toString()}if(precision.toString().indexOf(".")!=-1){precision=Math.floor(precision)}if(0>=precision||precision>=101){throw new RangeError('precision '+precision+' out of range');}var rval='';var spaces=this.toString().split('.');var decimalPoints=0;if(typeof spaces[1]!='undefined'){decimalPoints=spaces[1].length}var currentPoints=spaces[0].length+decimalPoints;var newDecimalPoints=precision-spaces[0].length;if(newDecimalPoints>decimalPoints){var zeroCount=precision-currentPoints;rval+=this.toString()if(decimalPoints==0){rval+='.'}for(var i=0;i<zeroCount;i++){rval+='0'}}else{if(newDecimalPoints>0){rval=this.toString().substr(0,precision+1)}else{var value=parseInt(spaces[0]);if(spaces[0].length==precision){return(value.toString())}return(value.toExponential(precision-1))}}return rval};Number.prototype.toLocaleString=function(){return(""+this)};Number.prototype.toString=function(radix){return(""+this)};Number.prototype.toExponential=function(){var points=(this.toString().split('.'))[0].length-1;var newValue=this.valueOf();newValue/=Math.pow(10,points);var decimalPoints=arguments[0];if(typeof decimalPoints=='undefined'){decimalPoints=(this.toString().length)-2;if(0>decimalPoints){decimalPoints=0}}newValue*=Math.pow(10,decimalPoints);newValue=Math.round(newValue);newValue/=Math.pow(10,decimalPoints);return(newValue+"e+"+points)};Number.prototype.toFixed=function(decimalPoints){if(typeof decimalPoints=='undefined'){decimalPoints=0}var len=this.toString().length;var spaces=this.toString().split('.');var currentDec=len-spaces[0].length-1;var rval='';if(decimalPoints>currentDec){rval=this.toString();for(var i=0;i<(decimalPoints-currentDec);i++){rval+='0'}}else{rval+=spaces[0];if(decimalPoints!=0&&spaces.length!=1){rval+='.';for(var i=0;i<decimalPoints;i++){rval+=spaces[1].charAt(i)}}}return rval};Function.prototype.toSource=function(){return('('+this.toString()+')')};Function.prototype.call=function(){var thisArg=typeof arguments[0]!='undefined'?arguments[0]:{};var argsArray=[];for(var i=1,l=arguments.length;i<l;i++){argsArray[argsArray.length]=arguments[i]}return this.apply(thisArg,argsArray)};Function.prototype.apply=function(o,p){if(typeof this!="function"){throw new TypeError("Function.prototype.apply called on incompatible "+this);}p=(p===undefined||p===null)?[]:p;o=(o===undefined||o===null)?window:Object(o);if(!(p instanceof Array)&&typeof p.callee!="function"){throw new TypeError("second argument to Function.prototype.apply must be an array");}var parameters='';for(var i=0,l=p.length;i<l;i++){parameters+='p['+i+']';if(i!=l-1){parameters+=", "}}var temporaryName='__apply__';while(o[temporaryName]!==undefined){temporaryName+="_"}o[temporaryName]=this;var rval=eval('o.'+temporaryName+'('+parameters+')');delete o[temporaryName];return rval};
